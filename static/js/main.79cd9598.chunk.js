(this.webpackJsonptravelagency=this.webpackJsonptravelagency||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),o=(a(14),a(1)),s=a(2),i=a(4),u=a(3),m=a(5),d=(a(15),a(8)),h=a.n(d),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={newlist:[],ticketDetail:[],airLine:"",contactNo:"",id:0,travelDate:"",ticketNo:"",invoiceNo:"",passangerName:"",pnr:"",salePrice:0,amountInCash:0,amountInBank:0,airPayAmount:0,balance:0,profit:0,isEdit:!1,agentReference:e.props.userName,errTravelDate:!0,errTicketNo:!0,errInvoiceNo:!0,errPassangerName:!0,errAirLine:!0,errPnr:!0,errSalePrice:!0,errAirPayAmount:!0,errTravelDateMsg:"*",errTicketNoMsg:"*",errInvoiceNoMsg:"*",errPassangerNameMsg:"*",errPnrMsg:"*",errAirLineMsg:"*",errSalePriceMsg:"Sale Price should be more then 0",errAirPayAmountMsg:"Air Pay should be more then 0"},e.HandlerChange=function(t){e.setState(Object(m.a)({},t.target.name,"number"===t.target.type?parseFloat(t.target.value):t.target.value))},e.checkIsEmpty=function(e){return""!==e},e.resetErrorState=function(t){e.setState({errTravelDate:!0,errTicketNo:!0,errInvoiceNo:!0,errPassangerName:!0,errAirLine:!0,errPnr:!0,errSalePrice:!0,errAirPayAmount:!0})},e.handlerFromValidation=function(t){e.resetErrorState();var a=e.state,n=a.errTravelDate,r=a.errTicketNo,l=a.errPassangerName,c=a.errInvoiceNo,o=a.errAirPayAmount,s=a.errSalePrice,i=a.errPnr,u=a.errAirLine;return n=e.checkIsEmpty(e.state.travelDate),r=e.checkIsEmpty(e.state.ticketNo),l=e.checkIsEmpty(e.state.passangerName),c=e.checkIsEmpty(e.state.invoiceNo),i=e.checkIsEmpty(e.state.pnr),u=e.checkIsEmpty(e.state.airLine),o=0!==e.state.airPayAmount&&e.state.airPayAmount!==isNaN,s=0!==e.state.salePrice&&e.state.salePrice!==isNaN,e.setState({errTravelDate:n,errTicketNo:r,errPassangerName:l,errInvoiceNo:c,errAirPayAmount:o,errSalePrice:s,errPnr:i,errAirLine:u}),!!(n&&r&&l&&c&&o&&s&&i&&u)},e.HandlerAddRecord=function(t){t.preventDefault(),e.state.isEdit?e.Update():e.Add()},e.Update=function(){e.handlerFromValidation()?(fetch("http://localhost:4000/Update?travelDate=".concat(e.state.travelDate,"\n         &ticketNo=").concat(e.state.ticketNo,"&invoiceNo=").concat(e.state.invoiceNo,"\n         &passangerName=").concat(e.state.passangerName,"&pnr=").concat(e.state.pnr,"\n         &airLine=").concat(e.state.airLine,"&contactNo=").concat(e.state.contactNo,"\n         &airPayAmount=").concat(e.state.airPayAmount,"&salePrice=").concat(e.state.salePrice,"\n         &amountInCash=").concat(e.state.amountInCash,"&amountInBank=").concat(e.state.amountInBank,"\n         &dueAmount=").concat(e.state.balance,"&profit=").concat(e.state.profit,"\n         &agentReference=").concat(e.state.agentReference,"&id=").concat(e.state.id,"\n    ")).then(alert("Record Has Been Updated!!")),e.setState({isEdit:!1}),e.HandlerFetchDataFromDB(),e.HandlerResetState()):alert("Please Enter Proper Data!!!")},e.Add=function(t){e.handlerFromValidation()?(fetch("http://localhost:4000/Add?travelDate=".concat(e.state.travelDate,"\n         &ticketNo=").concat(e.state.ticketNo,"&invoiceNo=").concat(e.state.invoiceNo,"\n         &passangerName=").concat(e.state.passangerName,"&pnr=").concat(e.state.pnr,"\n         &airLine=").concat(e.state.airLine,"&contactNo=").concat(e.state.contactNo,"\n         &airPayAmount=").concat(e.state.airPayAmount,"&salePrice=").concat(e.state.salePrice,"\n         &amountInCash=").concat(e.state.amountInCash,"&amountInBank=").concat(e.state.amountInBank,"\n         &dueAmount=").concat(e.state.balance,"&profit=").concat(e.state.profit,"\n         &agentReference=").concat(e.state.agentReference,"\n    ")).then(alert("Record Has Been Inserted!!!")),e.HandlerResetState(),e.HandlerFetchDataFromDB()):alert("Please Enter Proper Data!!!")},e.GetBalance=function(t){e.setState({balance:parseFloat(e.state.salePrice)-(parseFloat(e.state.amountInCash)+parseFloat(e.state.amountInBank)),profit:parseFloat(e.state.salePrice)-parseFloat(e.state.airPayAmount)})},e.HandlerDeleteRecord=function(t){fetch("http://localhost:4000/Delete?id=".concat(t)).then("Record has been deleted !!!"),e.HandlerFetchDataFromDB()},e.HandlerEditRecord=function(t){e.setState({id:t.id,travelDate:h()(t.travelDate,"yyyy-mm-dd"),ticketNo:t.ticketNo,invoiceNo:t.invoiceNo,passangerName:t.passangerName,pnr:t.pnr,salePrice:t.salePrice,amountInCash:t.amountInCash,amountInBank:t.amountInBank,airPayAmount:t.airPayAmount,balance:t.dueAmount,profit:t.profit,isEdit:!0,contactNo:t.contactNo,airLine:t.airLine})},e.HandlerGetDataEnteryForm=function(t){return r.a.createElement("table",{style:{border:"1px solid black",width:"auto",marginLeft:"5%"}},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Travel Date:"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",name:"travelDate",value:e.state.travelDate,onChange:e.HandlerChange}),e.state.errTravelDate?null:r.a.createElement("span",{style:{color:"red"}},e.state.errTravelDateMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"Ticket No:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"ticketNo",value:e.state.ticketNo,placeholder:"Ticket No",onChange:e.HandlerChange}),e.state.errTicketNo?null:r.a.createElement("span",{style:{color:"red"}},e.state.errTicketNoMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"Invoice No:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"invoiceNo",value:e.state.invoiceNo,placeholder:"Invoice No",onChange:e.HandlerChange}),e.state.errInvoiceNo?null:r.a.createElement("span",{style:{color:"red"}},e.state.errInvoiceNoMsg))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Passanger Name:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"passangerName",value:e.state.passangerName,placeholder:"Passanger Name",onChange:e.HandlerChange}),e.state.errPassangerName?null:r.a.createElement("span",{style:{color:"red"}},e.state.errPassangerNameMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"PNR:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"pnr",value:e.state.pnr,placeholder:"PNR",onChange:e.HandlerChange}),e.state.errPnr?null:r.a.createElement("span",{style:{color:"red"}},e.state.errTicketNoMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"Air Line:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"airLine",value:e.state.airLine,placeholder:"Air Line",onChange:e.HandlerChange}),e.state.errAirLine?null:r.a.createElement("span",{style:{color:"red"}},e.state.errAirLineMsg))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Contact No:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"contactNo",value:e.state.contactNo,placeholder:"Contact No",onChange:e.HandlerChange}))),r.a.createElement("tr",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Air Pay:"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",name:"airPayAmount",value:e.state.airPayAmount,onChange:e.HandlerChange}),r.a.createElement("br",null),e.state.errAirPayAmount?null:r.a.createElement("span",{style:{color:"red"}},e.state.errAirPayAmountMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"Price:"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",name:"salePrice",value:e.state.salePrice,onChange:e.HandlerChange}),r.a.createElement("br",null),e.state.errSalePrice?null:r.a.createElement("span",{style:{color:"red"}},e.state.errSalePriceMsg)),r.a.createElement("td",null,r.a.createElement("label",null,"Cash:"),r.a.createElement("br",null),r.a.createElement("input",{name:"amountInCash",value:e.state.amountInCash,type:"number",onChange:e.HandlerChange,onBlur:e.GetBalance}))),r.a.createElement("tr",null),r.a.createElement("tr",null),r.a.createElement("tr",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",null,"Bank:"),r.a.createElement("br",null),r.a.createElement("input",{style:{width:"70px"},name:"amountInBank",value:e.state.amountInBank,type:"number",onChange:e.HandlerChange,onBlur:e.GetBalance})),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("label",null,"Balnce Payment: "),r.a.createElement("br",null),r.a.createElement("span",{style:{background:"red",width:"50px"}},e.state.balance)),r.a.createElement("td",null,r.a.createElement("label",null,"Profit:"),r.a.createElement("br",null),r.a.createElement("span",{style:{background:"Green"}},e.state.profit))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("td",null,r.a.createElement("button",{onClick:e.HandlerAddRecord},e.state.isEdit?"Update":"Add")))))},e.HandlerGetListOfRecords=function(t){return r.a.createElement("div",null,r.a.createElement("h1",null,"List Of Tickets:")," ",r.a.createElement("hr",null),r.a.createElement("table",{className:"myTable table-striped"},r.a.createElement("thead",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Ticket No"),r.a.createElement("th",null,"PNR"),r.a.createElement("th",null,"Traveling Date"),r.a.createElement("th",null,"Air Pay"),r.a.createElement("th",null,"Sale Price"),r.a.createElement("th",null,"Due Amount"),r.a.createElement("th",null,"Profit"),r.a.createElement("th",null,"Action")),e.state.ticketDetail.map((function(t){return r.a.createElement("tr",{key:t.id,className:"myTable table-striped"},r.a.createElement("td",null,t.passangerName),r.a.createElement("td",null,t.ticketNo),r.a.createElement("td",null,t.pnr),r.a.createElement("td",null,new Date(t.travelDate).toLocaleDateString()),r.a.createElement("td",null,t.airPayAmount),r.a.createElement("td",null,t.salePrice),r.a.createElement("td",null,t.dueAmount),r.a.createElement("td",null,t.profit),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.HandlerEditRecord(t)}},"Edit")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.HandlerDeleteRecord(t.id)}},"Delete")))}))),r.a.createElement("button",{onClick:function(){return console.log(e.state.newlist)}},"Click Me"))},e}return Object(s.a)(a,[{key:"HandlerFetchDataFromDB",value:function(){var e=this;fetch("http://localhost:4000/GetAll").then((function(e){return e.json()})).then((function(t){return e.setState({ticketDetail:t})}))}},{key:"componentDidMount",value:function(){this.HandlerFetchDataFromDB()}},{key:"HandlerResetState",value:function(){this.setState({id:0,travelDate:"",ticketNo:"",invoiceNo:"",passangerName:"",pnr:"",salePrice:0,amountInCash:0,amountInBank:0,airPayAmount:0,balance:0,profit:0,contactNo:"",airLine:""})}},{key:"render",value:function(){return r.a.createElement("div",null,this.HandlerGetDataEnteryForm(),this.HandlerGetListOfRecords())}}]),a}(n.Component),p=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userObjArray:[{userName:"Awais",userPWD:"Awais@123"},{userName:"Saqib",userPWD:"Saqib@123"},{userName:"Sherwani",userPWD:"Sherwani@123"}],userName:"",userPWD:"",_isAuthorized:!1},e.HandlerChange=function(t){e.setState(Object(m.a)({},t.target.name,"number"===t.target.type?parseFloat(t.target.value):t.target.value))},e.HandlerCheckAuthorization=function(){var t=e.state,a=t.userName,n=t.userPWD,r=e.state.userObjArray.find((function(e){return e.userName===a&&e.userPWD===n}));e.setState({_isAuthorized:"undefined"!==typeof r})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:""},"User Name:"),":",r.a.createElement("input",{type:"text",placeholder:"User Name",name:"userName",onChange:this.HandlerChange}),r.a.createElement("label",{htmlFor:""},"User Password:"),":",r.a.createElement("input",{type:"text",placeholder:"User Password",name:"userPWD",onChange:this.HandlerChange,onBlur:this.HandlerCheckAuthorization}),r.a.createElement("button",{onClick:function(){return e.props.onAutho(e.state._isAuthorized,e.state.userName)}},"Log In"))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null," User Name or Password Is Incorrect!!!!"))}}]),a}(n.Component),g=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userName:"",isAuthorized:0},e.HandlerSetAuthorization=function(t,a){e.setState({isAuthorized:t?1:2,userName:a})},e.HandlerLogOut=function(t){e.setState({isAuthorized:0})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,0===this.state.isAuthorized?r.a.createElement(p,{onAutho:this.HandlerSetAuthorization}):null,1===this.state.isAuthorized?r.a.createElement("div",null,r.a.createElement("h1",null,"Travel Agency!!!"),r.a.createElement("h3",null,"Welcome Mr : ",this.state.userName),r.a.createElement("button",{onClick:this.HandlerLogOut},"Log Out")):null,1===this.state.isAuthorized?r.a.createElement(E,{userName:this.state.userName}):2===this.state.isAuthorized?r.a.createElement(N,null):null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.79cd9598.chunk.js.map